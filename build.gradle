apply plugin: 'java'
apply plugin: 'maven'

group = 'au.com.ish'
description = 'derbydump'

sourceCompatibility = 1.7
targetCompatibility = 1.7

repositories {
  mavenCentral()
}

dependencies {
  implementation 'log4j:log4j:1.2.17'
  implementation 'commons-codec:commons-codec:1.8'
  implementation 'commons-io:commons-io:2.4'
  implementation 'org.apache.derby:derby:10.14.2.0'

  testImplementation 'junit:junit:4.11'
}

version = '1.3'

[ compileJava, compileTestJava ]*.options*.encoding = 'UTF-8'

jar {
  from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
  manifest {
    attributes 'Main-Class': 'au.com.ish.derbydump.derbydump.main.DerbyDump'
  }
}

test {
  systemProperties 'java.awt.headless': 'true'
  // log each starting test
  beforeTest {
    descriptor -> logger.lifecycle("Running: " + descriptor)
  }
}
